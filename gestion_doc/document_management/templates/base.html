<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gestion documentaire{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script src="{% static 'js/main.js' %}" defer></script>
    <style>
        body {
            background: #f7f7f7;
        }
        header {
            background: #2c3e50;
            color: #fff;
            padding: 0;
            margin-bottom: 0;
            box-shadow: 0 2px 8px rgba(44,62,80,0.08);
        }
        nav {
            background: #007bff;
            padding: 0;
        }
        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        nav ul a {
            color: #fff;
            text-decoration: none;
            margin: 0 18px;
            font-size: 1.1em;
            font-weight: 500;
            padding: 10px 18px;
            display: inline-block;
            transition: color 0.2s, border-bottom 0.2s, background 0.2s;
            border-bottom: 2px solid transparent;
            border-radius: 6px;
        }
        nav ul a:hover {
            color: #fff;
            background: #18bc9c;
            border-bottom: 2px solid #18bc9c;
        }
        nav ul a.active {
            color: #fff;
            background: #2ecc71;
            border-bottom: 2px solid #2ecc71;
        }
        .btn {
            display: inline-block;
            padding: 7px 18px;
            border-radius: 6px;
            font-size: 1em;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .btn-login {
            background: #18bc9c;
            color: #fff;
        }
        .btn-login:hover {
            background: #149174;
        }
        .btn-logout {
            background: #e74c3c;
            color: #fff;
        }
        .btn-logout:hover {
            background: #c0392b;
        }
        .btn-detail {
            background: #3498db;
            color: #fff;
        }
        .btn-detail:hover {
            background: #217dbb;
        }
        .btn-edit {
            background: #27ae60;
            color: #fff;
        }
        .btn-edit:hover {
            background: #1e8449;
        }
        .btn-delete {
            background: #e74c3c;
            color: #fff;
        }
        .btn-delete:hover {
            background: #c0392b;
        }
        .btn-ajouter {
            background: #007bff;
            color: #fff;
        }
        .btn-ajouter:hover {
            background: #0056b3;
        }
        main {
            min-height: 80vh;
            max-width: 1100px;
            margin: 40px auto 0 auto;
            background: #fff;
            padding: 32px 5vw 32px 5vw;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(44,62,80,0.08);
        }
        footer {
            text-align: center;
            color: #888;
            font-size: 0.95em;
            margin: 40px 0 10px 0;
        }
        @media (max-width: 700px) {
            main { padding: 12px 2vw; }
            nav ul a { font-size: 1em; margin: 0 7px; }
        }
    </style>
</head>
<body>
    <header>
        {% if user.is_authenticated %}
        <nav>
            <ul>
                <a href="{% url 'home' %}"{% if request.resolver_match.url_name == 'home' %} class="active"{% endif %}>Accueil</a>
                <a href="{% url 'liste_structures' %}"{% if request.resolver_match.url_name == 'liste_structures' %} class="active"{% endif %}>Structures</a>
                <a href="{% url 'liste_delegations' %}"{% if request.resolver_match.url_name == 'liste_delegations' %} class="active"{% endif %}>Délégations</a>
                <a href="{% url 'liste_CategorieDocuments' %}"{% if request.resolver_match.url_name == 'liste_CategorieDocuments' %} class="active"{% endif %}>Catégories</a>
                <a href="{% url 'liste_agents' %}"{% if request.resolver_match.url_name == 'liste_agents' %} class="active"{% endif %}>Agents</a>
                <a href="{% url 'liste_users' %}"{% if request.resolver_match.url_name == 'liste_users' %} class="active"{% endif %}>Utilisateurs</a>
                <a href="{% url 'liste_roles' %}"{% if request.resolver_match.url_name == 'liste_roles' %} class="active"{% endif %}>Rôles</a>
                <a href="{% url 'liste_permissions' %}"{% if request.resolver_match.url_name == 'liste_permissions' %} class="active"{% endif %}>Permissions</a>
                <a href="{% url 'liste_documents' %}"{% if request.resolver_match.url_name == 'liste_documents' %} class="active"{% endif %}>Documents</a>
            </ul>
        </nav>
        {% endif %}
        <div style="text-align:right; margin-right: 2vw; margin-top: 5px;">
            {% if user.is_authenticated %}
                <span style="color:#fff; font-weight:500;">{{ user.first_name }} {{ user.last_name }} ({{ user.agent_profile.role.libelle|default:'-' }})</span>
                <a href="{% url 'logout' %}" class="btn btn-logout" style="margin-left:10px;">Déconnexion</a>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-login">Connexion</a>
            {% endif %}
        </div>
    </header>
    <main>
        {% block content %}{% endblock %}
    </main>
    <footer>
        &copy; {{ now|date:'Y' }} Gestion documentaire. Tous droits réservés.
    </footer>
</body>
</html>